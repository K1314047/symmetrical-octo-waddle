<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç©ºæŠ•æ—¥å†æ—¶é—´çº¿</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        h1 {
            font-size: 2rem;
            color: #000;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .subtitle {
            color: #666;
            font-size: 1rem;
            margin-bottom: 20px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.1rem;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e0e0e0;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .timeline-item:nth-child(1) { animation-delay: 0.1s; }
        .timeline-item:nth-child(2) { animation-delay: 0.2s; }
        .timeline-item:nth-child(3) { animation-delay: 0.3s; }
        .timeline-item:nth-child(4) { animation-delay: 0.4s; }
        .timeline-item:nth-child(5) { animation-delay: 0.5s; }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -37px;
            top: 5px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #000;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #000;
            z-index: 1;
        }
        
        .date {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .date::before {
            content: "ğŸ“…";
            margin-right: 8px;
        }
        
        .content {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .content:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .content h2 {
            font-size: 1.2rem;
            color: #000;
            margin-bottom: 15px;
            font-weight: bold;
        }
        
        .content h3 {
            font-size: 1rem;
            color: #000;
            margin: 20px 0 10px 0;
            font-weight: bold;
        }
        
        .content p {
            margin-bottom: 10px;
            color: #000;
        }
        
        .error {
            background: #ffe6e6;
            border-left: 4px solid #ff4444;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        footer {
            text-align: center;
            margin-top: 60px;
            color: #666;
            font-size: 0.9rem;
            padding: 20px 0;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 1.6rem;
            }
            
            .timeline {
                padding-left: 20px;
            }
            
            .timeline::before {
                left: 10px;
            }
            
            .timeline-item::before {
                left: -27px;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç©ºæŠ•æ—¥å†</h1>
            <div class="subtitle">æ¯æ—¥ç©ºæŠ•ä¿¡æ¯æ›´æ–°</div>
        </header>
        
        <div id="loading" class="loading">
            æ­£åœ¨åŠ è½½ç©ºæŠ•æ—¥å†æ–‡æ¡£...
        </div>
        
        <div id="timeline" class="timeline" style="display: none;">
            <!-- æ‰€æœ‰Markdownå†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        
        <div id="error" class="error" style="display: none;">
            <!-- é”™è¯¯ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
        </div>
        
        <footer>
            &copy; 2025 ç©ºæŠ•æ—¥å† | è‡ªåŠ¨åŠ è½½æ¯æ—¥æ›´æ–°
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const timeline = document.getElementById('timeline');
            const loading = document.getElementById('loading');
            const errorDiv = document.getElementById('error');
            
            // é…ç½®markedé€‰é¡¹
            marked.setOptions({
                breaks: true,
                gfm: true
            });
            
            // è‡ªåŠ¨æ‰«æmarkdownæ–‡ä»¶å¤¹
            async function scanMarkdownFiles() {
                const files = [];
                
                // ç”Ÿæˆæœ€è¿‘7å¤©çš„æ–‡ä»¶åï¼ˆæ­£ç¡®çš„æ ¼å¼ï¼š2025-11-18.mdï¼‰
                const today = new Date();
                for (let i = 6; i >= 0; i--) {
                    const date = new Date();
                    date.setDate(today.getDate() - i);
                    const year = date.getFullYear();
                    const month = String(date.getMonth() + 1).padStart(2, '0');
                    const day = String(date.getDate()).padStart(2, '0');
                    
                    // æ­£ç¡®çš„æ–‡ä»¶åæ ¼å¼ï¼š2025-11-18.md
                    const fileName = `${year}-${month}-${day}.md`;
                    files.push({
                        name: fileName,
                        path: `markdown/${fileName}`,
                        date: `${year}å¹´${month}æœˆ${day}æ—¥`
                    });
                }
                
                return files;
            }
            
            // åŠ è½½æ‰€æœ‰Markdownæ–‡ä»¶
            async function loadAllMarkdownFiles() {
                try {
                    const markdownFiles = await scanMarkdownFiles();
                    let loadedCount = 0;
                    const totalCount = markdownFiles.length;
                    
                    if (totalCount === 0) {
                        loading.innerHTML = 'æœªæ‰¾åˆ°Markdownæ–‡ä»¶<br>è¯·ç¡®ä¿æ–‡ä»¶åœ¨markdownæ–‡ä»¶å¤¹ä¸­ï¼Œå‘½åæ ¼å¼ä¸º: YYYY-MM-DD.md';
                        return;
                    }
                    
                    // æ›´æ–°åŠ è½½çŠ¶æ€
                    loading.textContent = `æ­£åœ¨åŠ è½½ç©ºæŠ•æ—¥å† (0/${totalCount})...`;
                    
                    // æŒ‰æ—¥æœŸæ’åºï¼ˆæ–°çš„åœ¨å‰ï¼‰
                    const sortedFiles = [...markdownFiles].sort((a, b) => 
                        b.name.localeCompare(a.name)
                    );
                    
                    let hasSuccess = false;
                    
                    for (const file of sortedFiles) {
                        try {
                            const response = await fetch(file.path);
                            if (response.ok) {
                                const markdownText = await response.text();
                                if (markdownText.trim()) {
                                    await displayMarkdown(markdownText, file.date);
                                    hasSuccess = true;
                                }
                            }
                        } catch (error) {
                            console.log(`æ–‡ä»¶ä¸å­˜åœ¨æˆ–åŠ è½½å¤±è´¥: ${file.name}`);
                        }
                        
                        loadedCount++;
                        loading.textContent = `æ­£åœ¨åŠ è½½ç©ºæŠ•æ—¥å† (${loadedCount}/${totalCount})...`;
                        
                        // æ·»åŠ å°å»¶è¿Ÿ
                        await new Promise(resolve => setTimeout(resolve, 50));
                    }
                    
                    // éšè—åŠ è½½æç¤ºï¼Œæ˜¾ç¤ºæ—¶é—´çº¿
                    loading.style.display = 'none';
                    
                    if (hasSuccess) {
                        timeline.style.display = 'block';
                    } else {
                        errorDiv.style.display = 'block';
                        errorDiv.innerHTML = `
                            <h2>åŠ è½½å¤±è´¥</h2>
                            <p>æ— æ³•åŠ è½½ä»»ä½•Markdownæ–‡ä»¶ã€‚è¯·æ£€æŸ¥ï¼š</p>
                            <ol>
                                <li>æ–‡ä»¶æ˜¯å¦æ”¾åœ¨ <strong>markdown</strong> æ–‡ä»¶å¤¹ä¸­ï¼Ÿ</li>
                                <li>æ–‡ä»¶åæ ¼å¼æ˜¯å¦ä¸º <strong>YYYY-MM-DD.md</strong>ï¼Ÿ</li>
                                <li>æ˜¯å¦ä½¿ç”¨äº†æœ¬åœ°æœåŠ¡å™¨ï¼Ÿ<code>python -m http.server 8000</code></li>
                                <li>å½“å‰æ–‡ä»¶ç»“æ„åº”è¯¥æ˜¯ï¼š
                                    <pre>
é¡¹ç›®æ–‡ä»¶å¤¹/
â”œâ”€â”€ index.html
â””â”€â”€ markdown/
    â”œâ”€â”€ 2025-11-18.md
    â”œâ”€â”€ 2025-11-19.md
    â””â”€â”€ 2025-11-20.md
                                    </pre>
                                </li>
                            </ol>
                        `;
                    }
                    
                } catch (error) {
                    console.error('æ‰«ææ–‡ä»¶å¤±è´¥:', error);
                    loading.style.display = 'none';
                    errorDiv.style.display = 'block';
                    errorDiv.innerHTML = `<p>æ‰«ææ–‡ä»¶å¤±è´¥: ${error.message}</p>`;
                }
            }
            
            // æ˜¾ç¤ºMarkdownå†…å®¹
            async function displayMarkdown(markdownText, date) {
                return new Promise((resolve) => {
                    // å°†Markdownè½¬æ¢ä¸ºHTML
                    const htmlContent = marked.parse(markdownText);
                    
                    // åˆ›å»ºæ—¶é—´çº¿é¡¹ç›®
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline-item';
                    
                    // æ·»åŠ æ—¥æœŸ
                    const dateDiv = document.createElement('div');
                    dateDiv.className = 'date';
                    dateDiv.textContent = date;
                    timelineItem.appendChild(dateDiv);
                    
                    // æ·»åŠ å†…å®¹
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'content';
                    contentDiv.innerHTML = htmlContent;
                    timelineItem.appendChild(contentDiv);
                    
                    // æ·»åŠ åˆ°æ—¶é—´çº¿
                    timeline.appendChild(timelineItem);
                    
                    resolve();
                });
            }
            
            // å¼€å§‹åŠ è½½æ‰€æœ‰æ–‡ä»¶
            loadAllMarkdownFiles();
        });
    </script>
</body>
</html>